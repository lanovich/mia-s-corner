# **Области хранения данных**

- **БД (PostgreSQL)** → основное хранилище данных
- **BFF (API)** → управление сессией пользователя и бизнес-логика
- **Стор (Redux/Zustand)** → управление состоянием на клиенте
- **LocalStorage** → хранение токена и корзины для неавторизованных пользователей

---

# **Сущности приложения**

## **Пользователь**
- **БД** → хранит список пользователей
- **BFF** → управляет сессией текущего пользователя
- **Стор** → используется на клиенте для отображения
- **LocalStorage** → хранение токена для неавторизованного пользователя

## **Роль пользователя**
- **БД** → хранит список ролей
- **BFF** → передаёт роль пользователя
- **Стор** → используется на клиенте

## **Товар**
- **БД** → хранит список товаров
- **Стор** → отображение товаров в браузере

## **Категория товаров**
- **БД** → хранит категории товаров
- **Стор** → используется на клиенте для фильтрации

## **История товара**
- **БД** → содержит информацию о версиях товара

## **Корзина**
- **БД** → хранит товары в корзине пользователя
- **Стор** → управление состоянием корзины на клиенте
- **LocalStorage** → хранение товаров в корзине для неавторизованных пользователей

## **Заказ**
- **БД** → хранит оформленные заказы
- **BFF** → управление статусом заказа

---

# **Таблицы БД (PostgreSQL)**

## **Пользователи (`users`)**
| id  | phone_number  | password  | registered_at  | role_id  |

## **Роли (`roles`)**
| id  | name  |

## **Товары (`products`)**
| id  | title  | image_url  | compound  | size  | price  | category_id  | history_id  | quantity_in_stock  |

## **Категории (`categories`)**
| id  | name  |

## **История товаров (`history`)**
| id  | number  |

## **Корзина (`cart`)**
| id  | user_id  | product_id  | quantity  |

## **Заказы (`orders`)**
| id  | user_id  | total_price  | status  | created_at  |

---

# **Схема состояния на BFF**

## **Текущий пользователь**
| phone_number  | password  | role  |

---

# **Схема для Zustand/Redux (на клиенте)**

## **user**
| id  | phone_number  | role  |

## **products**
Массив товаров:
| id  | title  | image_url  | compound  | size  | price  | category_id  |

## **cart**
Массив товаров в корзине:
| id  | product_id  | quantity  |

## **orders**
Массив заказов:
| id  | total_price  | status  | created_at  |

## **LocalStorage**
- `token` → токен для неавторизованного пользователя
- `cart` → данные корзины для неавторизованного пользователя
