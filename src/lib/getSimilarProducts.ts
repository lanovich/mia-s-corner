import { supabase } from "./supabase";

export const getSimilarProducts = async (historyId: number) => {
  console.log(`üîÑ –ó–∞–ø—Ä–æ—Å —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ç–æ–π –∂–µ –∏—Å—Ç–æ—Ä–∏–∏:`);

  const { data, error } = await supabase
    .from("products")
    .select(
      `
        *,
        sizes(*),
        history:histories(id, title, description)
      `
    )
    .eq("history_id", historyId)

  if (error) {
    console.error(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ç–æ–π –∂–µ –∏—Å—Ç–æ—Ä–∏–∏:`, error);
    return [];
  }

  return data;
};
